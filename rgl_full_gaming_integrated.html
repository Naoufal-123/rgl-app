
<!DOCTYPE html>
<html lang="ar">
<head>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyBfjJjko1_Fi6aAVSH9EKY3cy7H9Kx5P50",
  authDomain: "rgl33-46208.firebaseapp.com",
  databaseURL: "https://rgl33-46208-default-rtdb.firebaseio.com",
  projectId: "rgl33-46208",
  storageBucket: "rgl33-46208.appspot.com",
  messagingSenderId: "44519193293",
  appId: "1:44519193293:web:1eacc378276d8c71814984",
  measurementId: "G-EQJE4BBHF5"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

function addTransaction(desc, amount) {
  const date = new Date().toLocaleString();
  db.ref('transactions').push({ desc, amount, date })
    .then(() => alert('âœ… ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©!'))
    .catch((error) => alert('âŒ Ø®Ø·Ø£: ' + error.message));
}

function loadTransactions() {
  db.ref('transactions').once('value').then(snapshot => {
    const data = snapshot.val();
    if (data) {
      Object.values(data).forEach(t => {
        console.log(`${t.desc}: ${t.amount} DH (${t.date})`);
      });
    } else {
      console.log("â›” Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø¨Ø¹Ø¯.");
    }
  });
}
</script>


  

  <meta charset="UTF-8">
  <title>RGL Gaming Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #1e1e2f; color: #fff; display: flex; min-height: 100vh; }
    aside { width: 250px; background: #111; display: flex; flex-direction: column; padding: 20px; }
    aside h2 { margin-bottom: 20px; font-size: 1.8em; text-align: center; color: #9c27b0; text-shadow: 0 0 10px #9c27b0; }
    aside button { background: #222; border: none; color: #fff; padding: 12px; margin-bottom: 10px; border-radius: 6px; cursor: pointer; transition: 0.3s; }
    aside button:hover { background: #9c27b0; box-shadow: 0 0 10px #9c27b0; }
    main { flex: 1; padding: 20px; display: flex; flex-direction: column; gap: 20px; }
    section { background: #2c2c3a; border-radius: 12px; padding: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); display: none; flex-direction: column; gap: 15px; }
    section.active { display: flex; }
    input, select, button, textarea { padding: 10px; border-radius: 8px; border: none; width: 100%; margin-bottom: 10px; }
    button.add-btn { background: #9c27b0; color: white; }
    button.add-btn:hover { background: #ba68c8; box-shadow: 0 0 10px #ba68c8; }
    .item, .credit-item, .client-card { padding: 10px; border-radius: 8px; margin: 5px 0; background: #3a3a4d; }
    .income-item { background: #4caf50; color: white; }
    .expense-item { background: #f44336; color: white; }
    .completed { background: #81c784; text-decoration: line-through; }
    .archived { opacity: 0.6; text-decoration: line-through; }
    .they-owe { color: #4caf50; }
    .you-owe { color: #f44336; }
    .dashboard-card { background: #9c27b0; color: white; padding: 15px; border-radius: 12px; text-align: center; font-size: 1.2em; box-shadow: 0 0 15px #9c27b0; }
    .action-btn { margin: 2px; padding: 5px 10px; border-radius: 6px; cursor: pointer; border: none; color: white; }
    .edit-btn { background: #2196f3; }
    .delete-btn { background: #f44336; }
    .addmoney-btn { background: #4caf50; }
    .submoney-btn { background: #ff9800; }
  </style>
</head>
<body>

<aside>
  <h2>ğŸ® RGL Gaming</h2>
  <button onclick="showSection('dashboard')">ğŸ† Dashboard</button>
  <button onclick="showSection('transactions')">ğŸ’° Ù…Ø¹Ø§Ù…Ù„Ø§Øª</button>
  <button onclick="showSection('clients')">ğŸ‘¤ Ø²Ø¨Ù†Ø§Ø¡</button>
  <button onclick="showSection('tasks')">âœ… Ù…Ù‡Ø§Ù…</button>
  <button onclick="showSection('credits')">ğŸ’³ ÙƒØ±ÙŠØ¯ÙŠ</button>
</aside>
Ã 

<main>
  
<section id="dashboard" class="active">
  <h2>ğŸ† Dashboard</h2>
  <div class="dashboard-card" id="summary-dashboard"></div>
</section>

<section id="transactions">
  <h2>ğŸ’° Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª</h2>
  <input type="text" id="desc" placeholder="Ø§Ù„ÙˆØµÙ" />
  <input type="number" id="amount" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº" />
  <select id="type">
    <option value="income">Ù…Ø¯Ø®ÙˆÙ„</option>
    <option value="expense">Ø®Ø³Ø§Ø±Ø©</option>
  </select>
  <button class="add-btn" onclick="addTransaction()">â• Ø¥Ø¶Ø§ÙØ©</button>
  <h3>âœ… Ø§Ù„Ù…Ø¯Ø®ÙˆÙ„Ø§Øª</h3>
  <div id="income-list"></div>
  <h3>âŒ Ø§Ù„Ø®Ø³Ø§Ø¦Ø±</h3>
  <div id="expense-list"></div>
</section>

<section id="clients">
  <h2>ğŸ‘¤ Ø²Ø¨Ù†Ø§Ø¡</h2>
  <input type="text" id="client-name" placeholder="Ø§Ù„Ø¥Ø³Ù…" />
  <input type="text" id="client-phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" />
  <input type="text" id="client-note" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø©" />
  <select id="client-type">
    <option value="new">Ø¬Ø¯ÙŠØ¯</option>
    <option value="returning">Ù‚Ø¯ÙŠÙ…</option>
  </select>
  <input type="text" id="client-next" placeholder="Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©" />
  <button class="add-btn" onclick="addClient()">â• Ø¥Ø¶Ø§ÙØ©</button>
  <div id="client-list"></div>
</section>

<section id="tasks">
  <h2>âœ… Ø§Ù„Ù…Ù‡Ø§Ù…</h2>
  <input type="text" id="task-name" placeholder="ÙˆØµÙ Ø§Ù„Ù…Ù‡Ù…Ø©" />
  <button class="add-btn" onclick="addTask()">â• Ø¥Ø¶Ø§ÙØ©</button>
  <div id="task-list"></div>
</section>

<section id="credits">
  <h2>ğŸ’³ Ø§Ù„ÙƒØ±ÙŠØ¯ÙŠ</h2>
  <input type="text" id="credit-name" placeholder="Ø§Ù„Ø¥Ø³Ù…" />
  <input type="number" id="credit-amount" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº" />
  <select id="credit-type">
    <option value="they_owe_me">Ø£Ù†Ø§ ÙƒÙ†Ø³Ø§Ù„Ùˆ</option>
    <option value="i_owe_them">Ù‡Ùˆ ÙƒÙŠØ³Ø§Ù„Ù†ÙŠ</option>
  </select>
  <button class="add-btn" onclick="addCredit()">â• Ø¥Ø¶Ø§ÙØ©</button>
  <div id="credit-list"></div>
</section>
</main>

<script>
  
  let transactions = [], clients = [], tasks = [], credits = [];
  
  window.onload = function() {
  loadTransactions();
  loadClients();
  loadTasks();
  loadCredits();
};

  
  function showSection(id) {
    document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    updateDashboard();
  }
  
  function speak(text) {
    const utterance = new SpeechSynthesisUtterance(text);
    speechSynthesis.speak(utterance);
  }
  
  function addTransaction() {
  const desc = document.getElementById("desc").value;
  const amount = parseFloat(document.getElementById("amount").value);
  const type = document.getElementById("type").value;
  const date = new Date().toLocaleString();

  if (!desc || isNaN(amount)) return alert("Ø¹Ù…Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");

  db.ref('transactions').push({ desc, amount, type, date })
    .then(() => {
      document.getElementById("desc").value = '';
      document.getElementById("amount").value = '';
      loadTransactions(); // Ø¨Ø§Ø´ Ù†Ø¹Ø§ÙˆØ¯ Ù†Ø¬ÙŠØ¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
      updateDashboard();
      speak('âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©!');
    })
    .catch((error) => alert('âŒ Ø®Ø·Ø£: ' + error.message));
}
function loadTransactions() {
  db.ref('transactions').once('value').then(snapshot => {
    transactions = [];
    snapshot.forEach(childSnapshot => {
      transactions.push(childSnapshot.val());
    });
    renderTransactions();
    updateDashboard();
  });
}
function loadClients() {
  db.ref('clients').once('value').then(snapshot => {
    clients = [];
    snapshot.forEach(childSnapshot => {
      clients.push(childSnapshot.val());
    });
    renderClients();
    updateDashboard();
  });
}
function loadTasks() {
  db.ref('tasks').once('value').then(snapshot => {
    tasks = [];
    snapshot.forEach(childSnapshot => {
      tasks.push(childSnapshot.val());
    });
    renderTasks();
    updateDashboard();
  });
}
function loadCredits() {
  db.ref('credits').once('value').then(snapshot => {
    credits = [];
    snapshot.forEach(childSnapshot => {
      credits.push(childSnapshot.val());
    });
    renderCredits();
    updateDashboard();
  });
}

  
  function renderTransactions() {
  const incomeList = document.getElementById("income-list");
  const expenseList = document.getElementById("expense-list");
  incomeList.innerHTML = "";
  expenseList.innerHTML = "";
  transactions.forEach((t, i) => {
    const item = '<div class="item ' + (t.type === 'income' ? 'income-item' : 'expense-item') + '">' + 
      t.desc + ': ' + t.amount + ' DH (' + t.date + ') ' +
      '<button class="action-btn delete-btn" onclick="deleteTransaction(' + i + ')">ğŸ—‘</button></div>';
    if (t.type === 'income') incomeList.innerHTML += item;
    else expenseList.innerHTML += item;
  });
}
  
  function addClient() {
    const name = document.getElementById("client-name").value;
    const phone = document.getElementById("client-phone").value;
    const note = document.getElementById("client-note").value;
    const type = document.getElementById("client-type").value;
    const next = document.getElementById("client-next").value;
    const date = new Date().toLocaleString();
    if (!name) return alert("Ø¹Ù…Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
    clients.push({ name, phone, note, type, next, date });
    localStorage.setItem('clients', JSON.stringify(clients));
    renderClients();
    speak('âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø²Ø¨ÙˆÙ†!');
  }
  
  function renderClients() {
  const list = document.getElementById("client-list");
  list.innerHTML = clients.map((c, i) => 
    '<div class="client-card">' + c.name + ' (' + c.phone + ')<br>Ù†ÙˆØ¹: ' + c.type +
    '<br>Ù…Ù„Ø§Ø­Ø¸Ø©: ' + c.note + '<br>Ø®Ø¯Ù…Ø© Ù‚Ø§Ø¯Ù…Ø©: ' + c.next + '<br>ğŸ“… ' + c.date +
    ' <button class="action-btn delete-btn" onclick="deleteClient(' + i + ')">ğŸ—‘</button></div>'
  ).join('');
}

  
function renderTasks() {
  const list = document.getElementById("task-list");
  list.innerHTML = tasks.map((t, i) =>
    '<div class="item ' + (t.done ? 'completed' : '') + '">' +
    '<input type="checkbox" ' + (t.done ? 'checked' : '') + ' onchange="toggleTask(' + i + ')"> ' +
    t.taskName +
    ' <button class="action-btn delete-btn" onclick="deleteTask(' + i + ')">ğŸ—‘</button></div>'
  ).join('');
}
function addTask() {
  const taskName = document.getElementById("task-name").value;
  if (!taskName) return alert("Ø¹Ù…Ø± Ø§Ù„Ù…Ù‡Ù…Ø©");
  tasks.push({ taskName, done: false });
  localStorage.setItem('tasks', JSON.stringify(tasks));
  renderTasks();
  updateDashboard();
  speak('âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù‡Ù…Ø©!');

  // Ù…Ø³Ø­ Ø§Ù„ÙÙˆØ±Ù… Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø¶Ø§ÙØ©
  document.getElementById("task-name").value = '';
}

function renderTasks() {
  const list = document.getElementById("task-list");
  list.innerHTML = tasks.map((t, i) =>
    '<div class="item ' + (t.done ? 'completed' : '') + '">' +
    '<input type="checkbox" ' + (t.done ? 'checked' : '') + ' onchange="toggleTask(' + i + ')"> ' +
    t.taskName +
    ' <button class="action-btn delete-btn" onclick="deleteTask(' + i + ')">ğŸ—‘</button>' +
    '</div>'
  ).join('');
}
function toggleTask(index) {
  tasks[index].done = !tasks[index].done;
  localStorage.setItem('tasks', JSON.stringify(tasks));
  renderTasks();
  updateDashboard();
}

  
  function toggleTask(index) {
    list.innerHTML = tasks.map((t, i) => '<div class="item ' + (t.done ? 'completed' : '') + '"><input type="checkbox" ' + (t.done ? 'checked' : '') + ' onchange="toggleTask(' + i + ')"> ' + t.taskName + ' <button class="action-btn delete-btn" onclick="deleteTask(' + i + ')">ğŸ—‘</button></div>').join('');
    tasks[index].done = !tasks[index].done;
    localStorage.setItem('tasks', JSON.stringify(tasks));
    renderTasks();
  }
  
  function renderCredits() {
  const list = document.getElementById("credit-list");
  list.innerHTML = credits.map((c, i) => 
    '<div class="credit-item">' +
    '<strong>' + c.name + '</strong> - <span class="' + 
    (c.type === 'they_owe_me' ? 'they-owe' : 'you-owe') + '">' +
    c.amount + ' DH</span> (' + 
    (c.type === 'they_owe_me' ? 'Ø£Ù†Ø§ ÙƒÙ†Ø³Ø§Ù„Ùˆ' : 'Ù‡Ùˆ ÙƒÙŠØ³Ø§Ù„Ù†ÙŠ') + ') ' +
    '<button class="action-btn addmoney-btn" onclick="modifyCredit(' + i + ', \'add\')">+ Ø²ÙŠØ§Ø¯Ø©</button> ' +
    '<button class="action-btn submoney-btn" onclick="modifyCredit(' + i + ', \'subtract\')">- Ù†Ù‚ØµØ§Ù†</button> ' +
    '<button class="action-btn delete-btn" onclick="deleteCredit(' + i + ')">ğŸ—‘ Ø­Ø°Ù</button>' +
    '</div>'
  ).join('');
} 
function renderCredits() {
  const list = document.getElementById("credit-list");
  list.innerHTML = credits.map((c, i) =>
    '<div class="credit-item">' +
    '<strong>' + c.name + '</strong> - <span class="' +
    (c.type === 'they_owe_me' ? 'they-owe' : 'you-owe') + '">' +
    c.amount + ' DH</span> (' +
    (c.type === 'they_owe_me' ? 'Ø£Ù†Ø§ ÙƒÙ†Ø³Ø§Ù„Ùˆ' : 'Ù‡Ùˆ ÙƒÙŠØ³Ø§Ù„Ù†ÙŠ') + ') ' +
    '<button class="action-btn addmoney-btn" onclick="modifyCredit(' + i + ', &quot;add&quot;)">+ Ø²ÙŠØ§Ø¯Ø©</button> ' +
    '<button class="action-btn submoney-btn" onclick="modifyCredit(' + i + ', &quot;subtract&quot;)">- Ù†Ù‚ØµØ§Ù†</button> ' +
    '<button class="action-btn delete-btn" onclick="deleteCredit(' + i + ')">ğŸ—‘ Ø­Ø°Ù</button>' +
    '</div>'
  ).join('');
}
function modifyCredit(index, action) {
  const amount = parseFloat(prompt("Ø§Ù„Ù…Ø¨Ù„Øº:"));
  if (isNaN(amount)) return alert("Ø£Ø¯Ø®Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­");

  if (action === 'add') {
    credits[index].amount += amount;
  } else if (action === 'subtract') {
    credits[index].amount -= amount;
    if (credits[index].amount < 0) credits[index].amount = 0;
  }

  localStorage.setItem('credits', JSON.stringify(credits));
  renderCredits();
  updateDashboard();
}
  
  function deleteCredit(index) {
    if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø°ÙØŸ")) {
      credits.splice(index, 1);
      localStorage.setItem('credits', JSON.stringify(credits));
      renderCredits();
    }
  }
  
  function updateDashboard() {
    const income = transactions.filter(t => t.type === 'income').reduce((a, b) => a + b.amount, 0);
    const expense = transactions.filter(t => t.type === 'expense').reduce((a, b) => a + b.amount, 0);
    document.getElementById('summary-dashboard').innerHTML = 'âœ… Ø§Ù„Ù…Ø¯Ø®ÙˆÙ„: ' + income + ' DH | âŒ Ø§Ù„Ø®Ø³Ø§Ø¦Ø±: ' + expense + ' DH | ğŸ‘¥ Ø§Ù„Ø²Ø¨Ù†Ø§Ø¡: ' + clients.length + ' | âœ… Ø§Ù„Ù…Ù‡Ø§Ù…: ' + tasks.length + ' | ğŸ’³ Ø§Ù„ÙƒØ±ÙŠØ¯ÙŠ: ' + credits.length;
  }
  updateDashboard();
  function deleteTransaction(index) {
  if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø°ÙØŸ")) {
    transactions.splice(index, 1);
    localStorage.setItem('transactions', JSON.stringify(transactions));
    renderTransactions();
    updateDashboard();
  }
}
function deleteClient(index) {
  if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø°ÙØŸ")) {
    clients.splice(index, 1);
    localStorage.setItem('clients', JSON.stringify(clients));
    renderClients();
    updateDashboard();
  }
}
function deleteTask(index) {
  if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø°ÙØŸ")) {
    tasks.splice(index, 1);
    localStorage.setItem('tasks', JSON.stringify(tasks));
    renderTasks();
    updateDashboard();
  }
}

function deleteTransaction(index) {
  if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø°ÙØŸ")) {
    transactions.splice(index, 1);
    localStorage.setItem('transactions', JSON.stringify(transactions));
    renderTransactions();
    updateDashboard();
  }
}

function deleteClient(index) {
  if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø°ÙØŸ")) {
    clients.splice(index, 1);
    localStorage.setItem('clients', JSON.stringify(clients));
    renderClients();
    updateDashboard();
  }
}

function addCredit() {
  const name = document.getElementById("credit-name").value;
  const amount = parseFloat(document.getElementById("credit-amount").value);
  const type = document.getElementById("credit-type").value;

  if (!name || isNaN(amount)) {
    alert("Ø¹Ù…Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
    return;
  }

  credits.push({ name, amount, type });
  localStorage.setItem('credits', JSON.stringify(credits));
  renderCredits();
  updateDashboard();
  speak('âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒØ±ÙŠØ¯ÙŠ!');

  // Ù…Ø³Ø­ Ø§Ù„ÙÙˆØ±Ù… Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø¶Ø§ÙØ©
  document.getElementById("credit-name").value = '';
  document.getElementById("credit-amount").value = '';
}


function modifyCredit(index, action) {
  const amount = parseFloat(prompt("Ø§Ù„Ù…Ø¨Ù„Øº:"));
  if (isNaN(amount)) return alert("Ø£Ø¯Ø®Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­");
  credits[index].amount = action === 'add' ? credits[index].amount + amount : credits[index].amount - amount;
  localStorage.setItem('credits', JSON.stringify(credits));
  renderCredits();
  updateDashboard();
}

function deleteCredit(index) {
  if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø°ÙØŸ")) {
    credits.splice(index, 1);
    localStorage.setItem('credits', JSON.stringify(credits));
    renderCredits();
    updateDashboard();
  }
}
  </script>
  

</body>
</html>
